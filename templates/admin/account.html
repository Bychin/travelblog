{% extends 'admin/base_site.html' %}
{% block content %}
<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">

    <div class="container">
        <div class="row">
            <div class="col-md-8">
                {% for post in posts %}
                <h1><a href="{% url 'post_detail' post.id %}">{{post.title}}</a></h1>
                <p class="lead">
                    by <a href="#">{{post.author}}</a>
                </p>
                <hr>
                <p>
                    <span class="glyphicon glyphicon-time"></span> Posted on {{post.created_date}}
                </p>
                <hr>


                <div class="row">
                    <div class="col-md-6">
                        {% load static %}
                       <img src="{% get_media_prefix %}{{ post.img.name }}" class="img-responsive img-rounded">
                    </div>
                   <div class="col-md-6">
                       <div id="map"></div>
                   </div>
               </div>
                <p class="lead" align="center">{{post.text|truncatechars:500}}</p>

                <script>
                        function initMap() {
                            var coords = {lat: {{ post.latitude }}, lng: {{ post.longitude }}};
                            var map = new google.maps.Map(document.getElementById('map{{ post.id }}'), {
                                zoom: 4,
                                center: coords
                            });
                            var marker = new google.maps.Marker({
                                position: coords,
                                map: map,
                                draggable: false,
                            });
                        }
                        initMap();
                </script>
                <script async defer
                        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSgKuqkhenn3A8URWybahP--T0rENyeO0&callback=initMap">
                </script>
                    <hr>
                <p class="lead" align="right">
                    <img height="40" src="{% static "like.jpg" %}" /> {{post.rating.likes}}
                    <img height="40" src="{% static "dislike.jpg" %}" /> {{post.rating.dislikes}}
                </p>
                 <div align="left">
                    <a href="{% url 'post_detail' post.id %}"><button type="button" class="btn btn-default navbar-btn">Details</button></a>
                 </div>
                    <hr>
            {% endfor %}
            </div>
        </div>
    </div>

</html>
{% endblock content %}
